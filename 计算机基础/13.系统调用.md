用户态切换成内核态的方式

* 系统调用
* 中断
* 异常

系统调用：brk和mmap

brk

![](/media/hpsyche/_dde_data/note/计算机基础/pict/13-1.png)

* 我们只通过brk申请了第一个字节，但是我们却给第5-8个字节赋值，为什么不会报错呢？

  因为我们申请最小单元是一页，为4k，4096个字节

![](/media/hpsyche/_dde_data/note/计算机基础/pict/13-2.png)

* 超过4096字节，将报错

mmap

![](/media/hpsyche/_dde_data/note/计算机基础/pict/13-3.png)

可以发现，在mmap时，申请了100页的空间，但由于linux是惰性的，即只有第一次使用到每一页的时候，才会去页表中查询（发生缺页中断），即在给每一页赋值时，系统发生了缺页中断，总共100次。

