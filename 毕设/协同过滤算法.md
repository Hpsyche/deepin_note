后期随着慕课平台的不断壮大，课程数量不断增大，面对繁多的课程选择，一个合理、智能的推荐算法也称为海大慕课平台的重要业务之一。

因此，本海大慕课平台提出了基于课程的协同过滤算法的课程推荐。

基于课程的协同过滤算法以课程的相似度来推荐课程，通过计算学生选课模型和课程特征向量之间的向量相似度，主动将相似度高的课程推荐给学生。由于每个学生都独立操作，拥有独立的特征向量，不需要考虑别的学生的兴趣。

**算法流程**

1.构建学生–>课程的倒排；

2.构建课程与课程的同现矩阵；

3.计算课程之间的相似度，即计算相似矩阵；

4.根据学生的历史记录，给学生推荐课程；

### 算法流程1

如下表，行表示学生，列表示课程，1表示学生选择了该课程

| 学生\课程 | a    | b    | c    | d    | e    |
| --------- | ---- | ---- | ---- | ---- | ---- |
| A         | 1    | 1    |      | 1    |      |
| B         |      | 1    | 1    |      | 1    |
| C         |      |      | 1    | 1    |      |
| D         |      | 1    | 1    | 1    |      |
| E         | 1    |      |      | 1    |      |

### 算法流程2 

构建课程与课程的同现矩阵。

共现矩阵C表示同时喜欢两个课程的学生数，可以计算出如下的共现矩阵C：

| 课程\课程 | a    | b    | c    | d    | e    |
| --------- | ---- | ---- | ---- | ---- | ---- |
| a         |      | 1    |      | 2    |      |
| b         | 1    |      | 2    | 2    | 1    |
| c         |      | 2    |      | 2    | 1    |
| d         | 2    | 2    | 2    |      |      |
| e         |      | 1    | 1    |      |      |

### 算法流程3

计算课程之间的相似度，即计算相似矩阵。

设|N(i)|表示喜欢课程i的学生数，|N(i)⋂N(j)|表示同时喜欢课程i，j的学生数，则课程i与课程j的相似度为： 

wij=|N(i)⋂N(j)| / |N(i)|

(1)式有一个问题，当课程j是一个很热门的课程时，人人都选择，比如学校所有人要求必修的课程，那么wijwij就会很接近于1，即(1)式会让很多课程都和此课程有一个很大的相似度，所以可以改进一下公式：

wij=|N(i)⋂N(j) / √||N(i)||N(j)|

矩阵N如下所示：

| 课程       | a    | b    | c    | d    | e    |
| ---------- | ---- | ---- | ---- | ---- | ---- |
| **学生数** | 2    | 3    | 3    | 4    | 1    |

其中余弦相似计算如下：

wab=1/√2*3=1/√6=0.41，其他同

利用式（2）便能计算课程之间的余弦相似矩阵如下：

| 课程\课程 | a    | b    | c    | d    | e    |
| --------- | ---- | ---- | ---- | ---- | ---- |
| a         |      | 0.41 |      | 0.71 |      |
| b         | 0.41 |      | 0.67 | 0.58 | 0.58 |
| c         |      | 0.67 |      | 0.58 | 0.58 |
| d         | 0.71 | 0.58 | 0.58 |      |      |
| e         |      | 0.58 | 0.58 |      |      |

### 算法流程4

课程j预测兴趣度=学生选择的课程i的兴趣度×课程i和课程j的相似度

例如：A学生选择课程a，b，d ，令兴趣度均为1

- 推荐c的预测兴趣度=1X0.67+1X0.58=1.25
- 推荐e的预测兴趣度=1X0.58=0.58

则对于A学生来说，最推荐的课程为c


