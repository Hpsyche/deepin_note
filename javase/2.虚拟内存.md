![](/media/hpsyche/_dde_data/note/javase/pict/虚拟内存.png)

* cpu高速缓存:保存cpu计算的中间结果,如果没有缓存,每次计算的中间结果需要放回内存中,内存与cpu的读取速度不匹配,造成cpu大量时间在空转,使CPU花费很长时间等待数据到来或把数据写入内存,所以引入了高速缓存.
* 在缓存中的数据是内存中的一小部分，但这一小部分是短时间内CPU即将访问的，当CPU调用大量数据时，就可避开内存直接从缓存中调用，从而加快读取速度。
* 缓存的工作原理是当CPU要读取一个数据时，首先从缓存中查找，如果找到就立即读取并送给CPU处理;如果没有找到，就用相对慢的速度从内存中读取并送给CPU处理，同时把这个数据所在的数据块调入缓存中，可以使得以后对整块数据的读取都从缓存中进行，不必再调用内存。

页式存储管理系统要求进程在运行之前将进程对应的全部程序都装入内存，但实际上许多进程在运行时，并非用到全部程序。故引入了虚拟存储器。

## 虚拟存储器

一个进程在运行时，没有必要将其全部装入内存，而仅将当前要运行的那部分装入内存，其余部分暂时留在磁盘内。当进程访问不在内存的那部分程序和数据时，再将其调入内存。

如果此时内存已满，无法装入新的程序和数据，可以将暂时不用的部分程序和数据置换出去，腾出内存空间后再将需要的调入内存，使进程能继续运行。

从用户的角度，系统具有的内存容量要比实际大得多，所以称为虚拟存储器。

**虚拟存储器是指具有请求调入和置换功能，能从逻辑上对内存容量进行扩充的一种存储器系统。**

虚拟存储器逻辑内存的容量由内存和外存对换区之和决定。（运行速度接近于内存速度，而成本却又接近于外存）请求页式存储管理。



## 实现方式

- 请求页式系统
- 请求段式系统

### 请求页式存储管理

将虚拟存储器用在页式存储管理系统中，进程的多个页根据需要调入内部，当内存空间紧张时再将暂时不用的页调出。因为页是根据需要请求调入的，因此成为请求页式存储管理系统。

实现请求页式存储管理系统，需要一定的硬件支持。除了需要**一定容量的内存和外存对换区之外**，还需要**页表机制、缺页中断机构和地址变换机构**。

软件支持：请求调页软件、页面置换软件

#### 请求页式存储管理的页面置换算法

- 最佳置换算法 OPT
- 先进先出置换算法 FIFO
- 最近最久未使用置换算法 LRU
- 时钟置换算法 Clock

![](/media/hpsyche/_dde_data/note/javase/pict/硬盘寻址.png)

虚拟内存就是虚拟的，在物理内存不够用的时候，暂时借用硬盘的空间，当做一部分内存使用，这部分空间就叫虚拟内存。

**当然虚拟内存由于使用的是硬盘，所以速度只有物理内存的几百分之一到左右。**

​	