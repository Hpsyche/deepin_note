## 面向错误的设计

### 断路器

![](/media/hpsyche/_dde_data/note/go/极客时间/pict/12-1.png)

断路器通常配合服务降级来完成。

当我们的依赖系统调用他时，如果成功，则相当于断路器是闭合状态（success），系统正常运行；

如果失败了 ，并且失败达到了一定次数，断路器就会处于开启状态，这个时候再调用，就会采取一系列降级措施（返回“系统忙”信息）等；

一定时间后，尝试重新去访问此服务，了解他是否恢复了，如果恢复了，重置断路器到关闭状态。

## 面向恢复的设计

### 健康检查

* 注意僵尸进程
  * 池化资源耗尽
  * 死锁

### 构建可恢复的系统

* 拒绝单体系统
* 面向错误和恢复的设计
  * 在依赖服务不可用时，可以继续存活
  * 快速启动
  * 无状态

