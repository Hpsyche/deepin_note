## 函数的闭包

Go 函数可以是一个闭包。闭包是一个函数值，它引用了其函数体之外的变量。该函数可以访问并赋予其引用的变量的值，换句话说，该函数被这些变量“绑定”在一起。

闭包的体现形式，通常就是用函数返回另一个函数

例如，函数 `adder` 返回一个闭包。每个闭包都被绑定在其各自的 `sum` 变量上。

```go
package main

import "fmt"

func adder() func(int) int{
	sum:=0
	return func(x int) int{
		sum+=x
		return sum
	}
}

func main(){
	pos,neg:=adder(),adder()
	for i:=0;i<10;i++{
		fmt.Println(
			pos(i),neg(5*i),
			)
	}
}
//output:
0 0
1 5
3 15
6 30
10 50
15 75
21 105
28 140
36 180
45 225
```

```go
package main

import "fmt"

func main(){
	var funs []func()
	for i:=0;i<11;i++{
		funs=append(funs,func(){
			fmt.Println(i)
		})
	}
	for _,f:=range funs{
		f()
	}
}
//output:
11
11
11
11
11
11
11
11
11
11
11
```





## 斐波那契闭包

```go
package main

import (
	"fmt"
	"testing"
)

func TestBibao(t *testing.T){
	f:=fibonacci();
	for i:=0;i<10;i++{
		fmt.Println(f())
	}
}

func fibonacci() func() int{
	a,b:=0,1
	sum:=0
	return func() int{
		sum=a+b
		a=b
		b=sum
		return sum
	}
}
//output:
1
2
3
5
8
13
21
34
55
89
```

